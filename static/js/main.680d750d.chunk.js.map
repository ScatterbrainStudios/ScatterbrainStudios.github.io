{"version":3,"sources":["penrose/penrose_class.tsx","penrose/vector_util.tsx","penrose/recurse_sketch.tsx","reportWebVitals.tsx","index.tsx"],"names":["ShapeSide","vectorBetween","p5","a","b","createVector","x","y","vectorFromMagAndAngle","mag","angle","angleMode","DEGREES","cos","sin","ratio","Math","PI","opposite","side","LEFT","RIGHT","Kite","point","vector","colors","tip","tail","center","pointFromLeftSide","pointFromRightSide","half","HalfKite","slowPointFromSide","copyVec","copy","rotate","add","pointFromSide","pointFromOtherSide","render","triangle","this","Vector","lerp","Dart","HalfDart","pointFromMidSide","ret","kite","label","fade","subdivide","parentKite","babyKite","dart","myColor","fill","red","green","blue","parentDart","sidePoint","babyDart","Penrose","FRAME_RATE","depthToShapes","DEPTH","config","curTime","TIME_OFFSET","startFrame","getRandomInt","min","max","floor","random","setup","canvasRef","createCanvas","displayWidth","displayHeight","background","decideColors","frameRate","width","height","halves","halfShapes","initializeSun","shapesAtDepth","windowResized","frameCount","resizeCanvas","windowWidth","windowHeight","draw","strokeWeight","shapes","length","i","shape","newVec","push","mult","arr","forEach","map","depth","Boolean","prevShapes","newDepth","subShape","color","hslToRgb","hue","saturation","lightness","chroma","abs","huePrime","secondComponent","lightnessAdjustment","round","React","Component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.680d750d.chunk.js","sourcesContent":["// http://archive.bridgesmathart.org/2017/bridges2017-213.pdf\r\nimport p5Types, { Vector, Color } from \"p5\";\r\nimport {vectorBetween} from \"./vector_util\"\r\n\r\nexport enum ShapeSide {\r\n  LEFT,\r\n  RIGHT\r\n}\r\nconst ratio = 2*Math.sin(Math.PI/10);\r\n\r\nexport type Shape = Kite | Dart\r\nexport type HalfShape = HalfDart | HalfKite;\r\n\r\nfunction opposite(side: ShapeSide) {\r\n  return side === ShapeSide.LEFT ? ShapeSide.RIGHT : ShapeSide.LEFT;\r\n}\r\n\r\nexport class Kite{\r\n  tip: Vector;\r\n  tail: Vector;\r\n  center: Vector;\r\n  private p5: p5Types;\r\n  private vector: Vector;\r\n  private pointFromLeftSide: Vector;\r\n  private pointFromRightSide: Vector;\r\n  private colors: {[i: number]: Color};\r\n  constructor(p5: p5Types, point: Vector, vector: Vector, colors: {[i: number]: Color}) {\r\n    this.p5 = p5;\r\n    this.tip = point;\r\n    this.colors = colors;\r\n    this.tail = Vector.add(point,vector);\r\n    this.vector = vector;\r\n    this.center = new Vector();\r\n    Vector.lerp(this.tail, this.tip, ratio, this.center);\r\n    this.pointFromLeftSide = this.slowPointFromSide(ShapeSide.LEFT);\r\n    this.pointFromRightSide = this.slowPointFromSide(ShapeSide.RIGHT);\r\n  }\r\n  half = (side: ShapeSide): HalfKite => {\r\n    return new HalfKite(this.p5,this,side,this.colors,2);\r\n  }\r\n  slowPointFromSide = (side: ShapeSide) => {\r\n    const copyVec = this.vector.copy();\r\n    this.p5.angleMode(this.p5.DEGREES);\r\n    side === ShapeSide.RIGHT ? copyVec.rotate(216) : copyVec.rotate(-216);\r\n    return copyVec.add(this.tail);\r\n  }\r\n  pointFromSide = (side: ShapeSide) => {\r\n    return (side === ShapeSide.RIGHT ? this.pointFromRightSide : this.pointFromLeftSide);\r\n  }\r\n  pointFromOtherSide = (side: ShapeSide) => {\r\n    return this.pointFromSide( side === ShapeSide.LEFT ? ShapeSide.RIGHT : ShapeSide.LEFT);\r\n  }\r\n  render = () => {\r\n    this.p5.triangle(this.tip.x,this.tip.y,this.tail.x,this.tail.y,this.pointFromSide(ShapeSide.LEFT).x,this.pointFromSide(ShapeSide.LEFT).y)\r\n    this.p5.triangle(this.tip.x,this.tip.y,this.tail.x,this.tail.y,this.pointFromSide(ShapeSide.RIGHT).x,this.pointFromSide(ShapeSide.RIGHT).y)\r\n  }\r\n}\r\nexport class Dart{\r\n  tip: Vector;\r\n  tail: Vector;\r\n  private p5: p5Types;\r\n  private vector: Vector;\r\n  private colors: {[i: number]: Color};\r\n  private pointFromLeftSide: Vector;\r\n  private pointFromRightSide: Vector;\r\n  constructor(p5: p5Types, point: Vector, vector: Vector, colors: {[i: number]: Color}) {\r\n    this.p5 = p5;\r\n    this.tip = point;\r\n    this.colors = colors;\r\n    this.tail = Vector.add(point,vector);\r\n    this.vector = vector;\r\n    this.pointFromLeftSide = this.slowPointFromSide(ShapeSide.LEFT);\r\n    this.pointFromRightSide = this.slowPointFromSide(ShapeSide.RIGHT);\r\n  }\r\n  half = (side: ShapeSide): HalfDart => {\r\n    return new HalfDart(this.p5,this,side,this.colors,1);\r\n  }\r\n  slowPointFromSide = (side: ShapeSide) => {\r\n    const copyVec = this.vector.copy();\r\n    this.p5.angleMode(this.p5.DEGREES);\r\n    side === ShapeSide.RIGHT ? copyVec.rotate(72) : copyVec.rotate(-72);\r\n    return copyVec.add(this.tail);\r\n  }\r\n  pointFromSide = (side: ShapeSide) => {\r\n    return (side === ShapeSide.RIGHT ? this.pointFromRightSide : this.pointFromLeftSide);\r\n  }\r\n  pointFromMidSide = (side: ShapeSide): Vector => {\r\n    let ret: Vector = new Vector();\r\n    Vector.lerp(this.tip,this.pointFromSide(side),ratio, ret);\r\n    return ret;\r\n  }\r\n  render = () => {\r\n    this.p5.triangle(this.tip.x,this.tip.y,this.tail.x,this.tail.y,this.pointFromSide(ShapeSide.LEFT).x,this.pointFromSide(ShapeSide.LEFT).y)\r\n    this.p5.triangle(this.tip.x,this.tip.y,this.tail.x,this.tail.y,this.pointFromSide(ShapeSide.RIGHT).x,this.pointFromSide(ShapeSide.RIGHT).y)\r\n  }\r\n}\r\n\r\nexport class HalfKite{\r\n  private fade = 0;\r\n  private p5: p5Types;\r\n  private kite: Kite;\r\n  private side: ShapeSide;\r\n  private colors: {[id: number]: Color};\r\n  private label: number;\r\n  constructor(p5: p5Types, kite: Kite, side: ShapeSide, colors: {[id: number]: Color}, label: number) {\r\n    this.p5 = p5;\r\n    this.kite = kite;\r\n    this.side = side;\r\n    this.colors = colors;\r\n    this.label = label;\r\n  }\r\n  subdivide = () => {\r\n    const parentKite = this.kite;\r\n    const babyKite = new Kite(this.p5,parentKite.center,vectorBetween(this.p5, parentKite.center,parentKite.pointFromSide(this.side)),this.colors);\r\n    const dart = new Dart(this.p5,parentKite.tail,vectorBetween(this.p5, parentKite.tail,babyKite.pointFromOtherSide(this.side)),this.colors);\r\n    return [new HalfKite(this.p5,babyKite,ShapeSide.LEFT,this.colors,1), new HalfKite(this.p5,babyKite,ShapeSide.RIGHT,this.colors,2), new HalfDart(this.p5,dart,opposite(this.side),this.colors,3)];\r\n  }\r\n  render = () => {\r\n    const myColor = this.colors[this.label];\r\n    this.p5.fill(this.p5.red(myColor), this.p5.green(myColor), this.p5.blue(myColor), this.fade);\r\n    const parentKite = this.kite;\r\n    const pointFromSide = parentKite.pointFromSide(this.side);\r\n    this.p5.triangle(parentKite.tip.x,parentKite.tip.y,pointFromSide.x,pointFromSide.y,parentKite.tail.x,parentKite.tail.y);\r\n    if(this.fade < 255) this.fade += 15;\r\n  }\r\n  tip = () => {\r\n    return this.kite.tip;\r\n  }\r\n}\r\nexport class HalfDart{\r\n  fade = 0;\r\n  private p5: p5Types;\r\n  private dart: Dart;\r\n  private side: ShapeSide;\r\n  private colors: {[id: number]: Color};\r\n  private label: number;\r\n  constructor(p5: p5Types, dart: Dart, side: ShapeSide, colors: {[id: number]: Color}, label: number) {\r\n    this.p5 = p5;\r\n    this.dart = dart;\r\n    this.side = side;\r\n    this.colors = colors;\r\n    this.label = label;\r\n  }\r\n  subdivide = () => {\r\n    const parentDart = this.dart;\r\n    const sidePoint = parentDart.pointFromSide(this.side);\r\n    const pointFromMidSide = parentDart.pointFromMidSide(this.side);\r\n    const babyKite = new Kite(this.p5,pointFromMidSide,vectorBetween(this.p5, pointFromMidSide,parentDart.tip),this.colors)\r\n    const babyDart = new Dart(this.p5,sidePoint,vectorBetween(this.p5, sidePoint,pointFromMidSide),this.colors);\r\n    return [new HalfKite(this.p5,babyKite,opposite(this.side),this.colors,4), new HalfDart(this.p5,babyDart,this.side,this.colors,5)]\r\n  }\r\n  render = () => {\r\n    const myColor = this.colors[this.label];\r\n    this.p5.fill(this.p5.red(myColor), this.p5.green(myColor), this.p5.blue(myColor), this.fade);\r\n    const parentDart = this.dart;\r\n    const pointFromSide = parentDart.pointFromSide(this.side);\r\n    this.p5.triangle(parentDart.tip.x,parentDart.tip.y,pointFromSide.x,pointFromSide.y,parentDart.tail.x,parentDart.tail.y);\r\n    if(this.fade < 255) this.fade += 15;\r\n  }\r\n  tip = () => {\r\n    return this.dart.tip;\r\n  }\r\n}\r\n","import p5Types, { Vector } from \"p5\";\r\n\r\nexport function vectorBetween(p5: p5Types, a: Vector, b: Vector) {\r\n  return p5.createVector(b.x-a.x, b.y - a.y);\r\n}\r\n\r\nexport function midpoint(p5: p5Types, a: Vector, b: Vector) {\r\n  return Vector.lerp(a,b,0.5);\r\n}\r\n\r\nexport function vectorFromMagAndAngle(p5: p5Types, mag: number, angle: number) {\r\n  p5.angleMode(p5.DEGREES)\r\n  const x = mag * p5.cos(angle);\r\n  const y = mag * p5.sin(angle);\r\n  return p5.createVector(x,y)\r\n}\r\n","import {Kite, ShapeSide, Shape, HalfShape} from \"./penrose_class\";\r\nimport {vectorFromMagAndAngle} from \"./vector_util\"\r\n\r\nimport React from \"react\";\r\nimport p5Types, { Vector, Color } from \"p5\";\r\nimport Sketch from \"react-p5\";\r\n\r\nexport class Penrose extends React.Component{\r\n  private FRAME_RATE = 120;\r\n  private depthToShapes: {[i: number]: HalfShape[]} = {};\r\n  private DEPTH = 5;\r\n\r\n  private config: {[id: number]: p5Types.Color} = {};\r\n  private curTime: number = 0;\r\n  private TIME_OFFSET = 0;\r\n  private startFrame = 0;\r\n\r\n  render(){\r\n    return (\r\n      <Sketch \r\n        setup={this.setup}\r\n        draw={this.draw}\r\n        windowResized={this.windowResized}\r\n      />\r\n    );\r\n  }\r\n\r\n  getRandomInt = (min: number, max: number) => {\r\n      return Math.floor(Math.random() * (max - min + 1)) + min;\r\n  }\r\n\r\n  setup = (p5: p5Types, canvasRef: Element) => {\r\n    //var clientHeight = Math.max(s.windowHeight, document.getElementById('sketch').clientHeight );\r\n\r\n    //var cnv = s.createCanvas(s.displayWidth, clientHeight);\r\n    //var cnv = p5.createCanvas(p5.clientWidth,p5.clientHeight);\r\n    //cnv.parent(\"sketch\");\r\n    p5.createCanvas(p5.displayWidth, p5.displayHeight);\r\n    p5.background(0);\r\n\r\n    this.config = this.decideColors(p5);\r\n    \r\n    p5.frameRate(this.FRAME_RATE)\r\n\r\n    const center = p5.createVector(p5.width/2, p5.height/2); // createVector(width - (Math.random() * width), height - (Math.random() * height));\r\n    const halves = this.halfShapes(this.initializeSun(p5,center,p5.width));\r\n    this.depthToShapes[0] = halves;\r\n    this.shapesAtDepth(this.depthToShapes, this.DEPTH)\r\n\r\n  }\r\n\r\n  windowResized = (p5: p5Types) => {\r\n    this.startFrame = p5.frameCount;\r\n\r\n    this.config = this.decideColors(p5);\r\n    p5.resizeCanvas(p5.windowWidth, p5.windowHeight);\r\n  }\r\n\r\n  draw = (p5: p5Types) => {\r\n    //clear()\r\n    //background('black');\r\n    p5.strokeWeight(1/(2*this.DEPTH))\r\n    this.curTime = (p5.frameCount - this.startFrame) / this.FRAME_RATE;\r\n    const shapes = this.shapesAtDepth(this.depthToShapes,this.DEPTH)\r\n    const length = shapes.length;\r\n    for (let i = 0; i < length; i++) {\r\n      const shape = shapes[i];\r\n      const y = shape.tip().y / p5.height;\r\n      if (y < this.curTime-this.TIME_OFFSET) shape.render()\r\n    }\r\n  }\r\n\r\n  initializeSun = (p5: p5Types, center: Vector, length: number) => {\r\n    p5.angleMode(p5.DEGREES);\r\n    const shapes = [];\r\n    for (let i = 1; i <= 5; i++) {\r\n      const angle = (360 / 5) * i;\r\n      const newVec = vectorFromMagAndAngle(p5, length,angle)\r\n      newVec.rotate(angle)\r\n      shapes.push(new Kite(p5, Vector.add(center,newVec), Vector.mult(newVec,-1),this.config));\r\n    }\r\n    return shapes;\r\n  }\r\n\r\n  halfShapes = (shapes: Shape[]): HalfShape[] => {\r\n    let arr: HalfShape[] = [];\r\n    shapes.forEach( (shape) => {\r\n      arr.push(shape.half(ShapeSide.LEFT));\r\n      arr.push(shape.half(ShapeSide.RIGHT));\r\n    })\r\n    return arr;\r\n  }\r\n\r\n  shapesAtDepth = (map: {[i: number]: HalfShape[]}, depth: number) => {\r\n    if (Boolean(map[depth])) return map[depth];\r\n    const prevShapes = this.shapesAtDepth(map,depth-1);\r\n    const newDepth: HalfShape[] = [];\r\n    prevShapes.forEach( (shape) => {\r\n      shape.subdivide().forEach( (subShape) => {\r\n        newDepth.push(subShape);\r\n      });\r\n    });\r\n    map[depth] = newDepth;\r\n    return newDepth;\r\n  }\r\n\r\n  decideColors = (p5: p5Types) => {\r\n    let colors: {[i: number]: Color} = {};\r\n    colors[1] = p5.color(this.hslToRgb(this.getRandomInt(0,72), 1, .5));\r\n    colors[2] = p5.color(this.hslToRgb(this.getRandomInt(72,144), 1, .5));\r\n    colors[3] = p5.color(this.hslToRgb(this.getRandomInt(144,216), 1, .5));\r\n    colors[4] = p5.color(this.hslToRgb(this.getRandomInt(216,288), 1, .5));\r\n    colors[5] = p5.color(this.hslToRgb(this.getRandomInt(288,360), 1, .5));\r\n    return colors;\r\n  }\r\n\r\n  hslToRgb = (hue: number, saturation: number, lightness: number) => {\r\n    var chroma = (1 - Math.abs((2 * lightness) - 1)) * saturation;\r\n    var huePrime = hue / 60;\r\n    var secondComponent = chroma * (1 - Math.abs((huePrime % 2) - 1));\r\n\r\n    huePrime = Math.floor(huePrime);\r\n    var red: number = 0;\r\n    var green: number = 0;\r\n    var blue: number = 0;\r\n\r\n    if( huePrime === 0 ){\r\n      red = chroma;\r\n      green = secondComponent;\r\n      blue = 0;\r\n    }else if( huePrime === 1 ){\r\n      red = secondComponent;\r\n      green = chroma;\r\n      blue = 0;\r\n    }else if( huePrime === 2 ){\r\n      red = 0;\r\n      green = chroma;\r\n      blue = secondComponent;\r\n    }else if( huePrime === 3 ){\r\n      red = 0;\r\n      green = secondComponent;\r\n      blue = chroma;\r\n    }else if( huePrime === 4 ){\r\n      red = secondComponent;\r\n      green = 0;\r\n      blue = chroma;    \r\n    }else if( huePrime === 5 ){\r\n      red = chroma;\r\n      green = 0;\r\n      blue = secondComponent;\r\n    }\r\n\r\n    var lightnessAdjustment = lightness - (chroma / 2);\r\n    red += lightnessAdjustment;\r\n    green += lightnessAdjustment;\r\n    blue += lightnessAdjustment;\r\n\r\n    return [Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255)];\r\n\r\n  }\r\n\r\n  /*\r\n  function initializeColorSliders() {\r\n    let colors = {};\r\n    colorMode(HSB);\r\n\r\n    colors[1] = color(255, 100, 50);// getRandomInt(0,72), 50);\r\n    //colorMode(HSB);\r\n\r\n    colors[2] = color(150, 1, .5);//getRandomInt(72,144), 50);\r\n    //colorMode(HSB);\r\n\r\n    colors[3] = color(100, 1, .5);//getRandomInt(144,216), 50);\r\n    //colorMode(HSB);\r\n\r\n    colors[4] = color(50, 1, .5);//getRandomInt(216,288), 50);\r\n    //colorMode(HSB);\r\n\r\n    colors[5] = color(0, 1, .5);//getRandomInt(288,360), 50);\r\n    return colors;\r\n  }\r\n  */\r\n}","const reportWebVitals = (onPerfEntry?: any) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { Penrose } from './penrose/recurse_sketch';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Penrose/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}